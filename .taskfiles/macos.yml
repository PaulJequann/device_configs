version: '3'

tasks:
  setup:
    desc: macOS system setup
    cmds:
      - task: install-homebrew
      - echo "✓ macOS setup complete!"

  install-homebrew:
    desc: Install Homebrew if not present
    cmds:
      - |
        if ! command -v brew &> /dev/null; then
          echo "Installing Homebrew..."
          /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
        else
          echo "✓ Homebrew already installed ($(brew --version | head -n1))"
        fi
    status:
      - command -v brew

  update:
    desc: Update all Homebrew packages
    cmds:
      - |
        echo "Updating Homebrew packages..."
        brew update && brew upgrade && brew cleanup

  clean:
    desc: Clean Homebrew cache
    cmds:
      - |
        echo "Cleaning Homebrew cache..."
        brew cleanup -s
        rm -rf "$(brew --cache)"
